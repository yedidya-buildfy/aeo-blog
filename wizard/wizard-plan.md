# AEO Wizard Plan

## Overview
A simple, straightforward onboarding wizard that guides users through initializing "Improve My AEO" and helps them choose the right plan for their needs.

## Wizard Flow (ASCII)

```
┌─────────────────────────────────────────────────────────────────┐
│                        🚀 Welcome to AEO                        │
└─────────────────────────┬───────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────┐
│          Step 1: Initialize "Improve My AEO"                   │
│          • Free LLM generation (1x)                            │
│          • Free robots.txt optimization                        │
│          • Free llms.txt generation                            │
└─────────────────────────┬───────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────┐
│              Step 2: Plan Comparison Table                     │
│              Choose your AEO enhancement level                 │
└─────────────────────────┬───────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────┐
│              Step 3: Blog Generation Setup                     │
│              Based on selected plan                            │
└─────────────────────────┬───────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────────────────┐
│                  🎉 Setup Complete!                            │
│                 Start improving your SEO                       │
└─────────────────────────────────────────────────────────────────┘
```

## 3-Click Wizard Flow (Optimized User Experience)

### Step 1: AEO Initialization (1 Click Required)
```
┌─ Welcome to AEO! ──────────────────────────────────────────────┐
│ 🚀 Ready to optimize your store for AI search engines?        │
│                                                                 │
│ We'll create robots.txt and llms.txt files to help AI bots     │
│ understand and promote your website better.                    │
│                                                                 │
│ [Improve My AEO] Button ← USER CLICK #1                       │
└─────────────────────────────────────────────────────────────────┘
```

**After Click 1 - Auto Progress:**
```
┌─ 🚀 Improving Your AEO... ─────────────────────────────────────┐
│ 🔄 Allowing AI bots to read your website...                    │
│ 🔄 Auto-generating AI website map...                           │
│ 🔄 Optimizing your AEO files...                                │
│ ✅ AEO Foundation Complete!                                     │
└─────────────────────────────────────────────────────────────────┘
```

### Step 2: Progressive Plan Comparison Table

#### Initial State (Before AEO Initialization):
```
┌─ Choose Your AEO Plan ──────────────────────────────────────────────────────────────┐
│                                                                                     │
│  Feature                 │  Free Plan │  Starter Plan │  Pro Plan                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  LLM Optimization        │     ⏳     │      ⏳       │      ⏳                   │
│  (ChatGPT, Gemini,       │            │               │                           │
│   Claude)                │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  All LLM Optimization    │     ✗      │      ⏳       │      ⏳                   │
│  (Enhanced for all)      │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Improve Gemini Search   │     ✗      │      ⏳       │      ⏳                   │
│  Research Results (?)    │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Finding Best Keywords   │     ⏳     │      ⏳       │      ⏳                   │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Initial Blog Generation │     ⏳     │      ⏳       │      ⏳                   │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Auto Blog Generation    │ 1/week     │   2/week      │   5/week                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Price                   │   FREE     │   $4.99/mo    │   $9.99/mo                │
│                                                                                     │
│  [Select Free] [Select Starter] [Select Pro]                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

#### After AEO Initialization (Step 1 Complete):
```
┌─ Choose Your AEO Plan ──────────────────────────────────────────────────────────────┐
│                        ✅ AEO Foundation Complete!                                  │
│  Feature                 │  Free Plan │  Starter Plan │  Pro Plan                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  LLM Optimization        │     ✅     │      ✅       │      ✅                   │
│  ✓ AI bots can read site │            │               │                           │
│  ✓ Auto AI website map   │            │               │                           │
│  ✓ Optimized AEO files   │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  All LLM Optimization    │     ✗      │      ⏳       │      ⏳                   │
│  (Enhanced for all)      │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Improve Gemini Search   │     ✗      │      ⏳       │      ⏳                   │
│  Research Results (?)    │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Finding Best Keywords   │     ⏳     │      ⏳       │      ⏳                   │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Initial Blog Generation │     ⏳     │      ⏳       │      ⏳                   │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Auto Blog Generation    │ 1/week     │   2/week      │   5/week                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Price                   │   FREE     │   $4.99/mo    │   $9.99/mo                │
│                                                                                     │
│  [Select Free] [Select Starter] [Select Pro]                                      │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

#### After Plan Selection & Enhanced Features (Starter/Pro only):
```
┌─ Plan Configuration Complete ───────────────────────────────────────────────────────┐
│                        ✅ Enhanced AEO Active!                                     │
│  Feature                 │  Free Plan │  Starter Plan │  Pro Plan                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  LLM Optimization        │     ✅     │      ✅       │      ✅                   │
│  ✓ AI bots can read site │            │               │                           │
│  ✓ Auto AI website map   │            │               │                           │
│  ✓ Optimized AEO files   │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  All LLM Optimization    │     ✗      │      ✅       │      ✅                   │
│  ✓ Enhanced AI results   │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Improve Gemini Search   │     ✗      │      ✅       │      ✅                   │
│  ✓ Better search ranking │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Finding Best Keywords   │     ⏳     │      ⏳       │      ⏳                   │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Initial Blog Generation │     ⏳     │      ⏳       │      ⏳                   │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Auto Blog Generation    │ 1/week     │   2/week      │   5/week                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Price                   │   FREE     │   $4.99/mo    │   $9.99/mo                │
│                                                                                     │
│                          🎯 Ready for Blog Generation!                            │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

#### Final State (All Features Complete):
```
┌─ 🎉 All Features Active! ───────────────────────────────────────────────────────────┐
│                        ✅ Your AEO Setup is Complete!                              │
│  Feature                 │  Free Plan │  Starter Plan │  Pro Plan                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  LLM Optimization        │     ✅     │      ✅       │      ✅                   │
│  ✓ AI bots can read site │            │               │                           │
│  ✓ Auto AI website map   │            │               │                           │
│  ✓ Optimized AEO files   │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  All LLM Optimization    │     ✗      │      ✅       │      ✅                   │
│  ✓ Enhanced AI results   │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Improve Gemini Search   │     ✗      │      ✅       │      ✅                   │
│  ✓ Better search ranking │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Finding Best Keywords   │     ✅     │      ✅       │      ✅                   │
│  ✓ Keywords discovered   │            │               │                           │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Initial Blog Generation │     ✅     │      ✅       │      ✅                   │
│  ✓ SEO blogs created     │  (1 blog)  │   (1 blog)    │  (10 blogs)               │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Auto Blog Generation    │     ✅     │      ✅       │      ✅                   │
│  ✓ Scheduled generation  │ 1/week     │   2/week      │   5/week                  │
│  ──────────────────────  │  ────────  │  ───────────  │  ──────────               │
│  Price                   │   FREE     │   $4.99/mo    │   $9.99/mo                │
│                                                                                     │
│                    [Go to Dashboard] [View My Blogs]                               │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

**Progressive Loading Messages:**

During Step 1 AEO Initialization, show these progress messages:
- 🔄 "Allowing AI bots to read your website..."
- 🔄 "Auto-generating AI website map..."
- 🔄 "Optimizing your AEO files..."
- ✅ "AEO Foundation Complete!"

During Enhanced Features Setup (Starter/Pro plans):
- 🔄 "Enhancing AI results for all models..."
- 🔄 "Improving Gemini search ranking..."
- ✅ "Enhanced AEO Active!"

During Keyword Discovery:
- 🔄 "Finding the best keywords for your website..."
- ✅ "Keywords discovered!"

During Blog Generation:
- 🔄 "Creating your SEO-optimized blogs..."
- 🔄 "Setting up automated blog generation..."
- ✅ "Blog system configured!"

**Features Explanation:**
- **Improve Gemini Search Research Results (?)**: Tooltip explaining this helps your website appear better in Google search results when people use Gemini for research.

### Step 2: Plan Selection (1 Click Required)
```
┌─ Choose Your AEO Plan ──────────────────────────────────────────┐
│ ✅ AEO Foundation Complete!                                     │
│                                                                 │
│ [Select Free] [Select Starter] [Select Pro] ← USER CLICK #2   │
└─────────────────────────────────────────────────────────────────┘
```

### Step 3: SEO Blog Setup (1 Click Required)
```
┌─ 📝 Ready to Generate SEO Blogs? ──────────────────────────────┐
│ We'll discover the best keywords for your website and create   │
│ optimized blog content to boost your search rankings.          │
│                                                                 │
│ [Start Blog Generation] Button ← USER CLICK #3                │
└─────────────────────────────────────────────────────────────────┘
```

**After Click 3 - Auto Progress (Free/Starter):**
```
┌─ 🎯 Setting Up Your Blog System... ────────────────────────────┐
│ 🔄 Finding the best keywords for your website...               │
│ ✅ Keywords discovered!                                         │
│                                                                 │
│ 🔄 Creating your first SEO blog...                             │
│ ✅ Blog generated successfully!                                 │
│                                                                 │
│ 🔄 Setting up weekly blog automation...                        │
│ ✅ Weekly publishing configured!                                │
└─────────────────────────────────────────────────────────────────┘
```

**After Click 3 - Auto Progress (Pro Plan):**
```
┌─ 🚀 Setting Up Your Pro Blog System... ───────────────────────┐
│ 🔄 Finding the best keywords for your website...               │
│ ✅ Keywords discovered!                                         │
│                                                                 │
│ 🔄 1/10 initialize blogs done...                               │
│ 🔄 2/10 initialize blogs done...                               │
│ 🔄 3/10 initialize blogs done...                               │
│ ... (continues in background)                                  │
│ 🔄 10/10 initialize blogs done...                              │
│ ✅ 10 Pro blogs generated successfully!                        │
│                                                                 │
│ 🔄 Setting up 5x weekly blog automation...                     │
│ ✅ Pro publishing configured (5 blogs/week)!                   │
└─────────────────────────────────────────────────────────────────┘
```

### Step 4: Completion

```
┌─ 🎉 Setup Complete! ────────────────────────────────────────────┐
│                                                                 │
│ Your AEO improvements are now active:                           │
│                                                                 │
│ ✅ LLM optimization files installed                             │
│ ✅ robots.txt optimized                                         │
│ ✅ llms.txt generated                                           │
│ ✅ Blog generation configured                                   │
│                                                                 │
│ [Go to Dashboard] [View My Blogs]                              │
│                                                                 │
│ 💡 Tip: Check your SEO improvements in the dashboard!          │
└─────────────────────────────────────────────────────────────────┘
```

## UI/UX Implementation Details

### Current App Analysis

**Existing Features:**
- ✅ AEO optimization (robots.txt, llms.txt generation) - `/app` route
- ✅ Blog generation (1, 2, or 5 per week) - `/app/seo-blogs` route
- ✅ Keyword discovery with Gemini AI
- ✅ Plan management with Shopify billing - `/app/billing` route
- ✅ Three plans: Free ($0, 1 blog/week), Starter ($4.99, 2 blogs/week), Pro ($9.99, 5 blogs/week)
- ❌ **Missing**: Pro plan 10 initial blog generation feature

**Current Tech Stack:**
- Remix framework with TypeScript
- Shopify Polaris components for UI
- Shopify App Bridge for authentication
- PostgreSQL with Prisma ORM
- Gemini AI for content generation

### Wizard Implementation Strategy

#### 1. Overlay Modal Approach
```tsx
// Create wizard overlay that disables background interaction
<WizardOverlay active={!isWizardCompleted}>
  <Card>
    <WizardStep currentStep={currentStep} />
    <ProgressTable step={currentStep} selectedPlan={selectedPlan} />
  </Card>
  <Backdrop />
</WizardOverlay>
```

#### 2. Check Wizard Completion State
```typescript
// In app._index.tsx loader - check if wizard was completed
const wizardCompleted = await getWizardState(shopDomain);
if (!wizardCompleted) {
  // Show wizard overlay on first load
  return { showWizard: true, ...data };
}
```

#### 3. Wizard Component Structure
```
/app/components/wizard/
├── WizardContainer.tsx       // Main overlay container
├── WizardStep1.tsx          // AEO initialization step
├── WizardStep2.tsx          // Plan selection step
├── WizardStep3.tsx          // Keyword discovery step
├── WizardStep4.tsx          // Blog generation setup
├── ProgressTable.tsx       // Dynamic plan comparison table
├── SpotlightHighlight.tsx  // Highlight specific buttons
└── WizardContext.tsx       // State management
```

#### 4. 3-Click UI Flow Implementation

**Step 1: AEO Initialization (Click 1)**
```tsx
<WizardStep1>
  <Text variant="headingLg">🚀 Ready to optimize your store?</Text>

  <Button
    variant="primary"
    size="large"
    onClick={handleImproveAEO}
  >
    Improve My AEO
  </Button>

  {isAEORunning && (
    <ProgressTable step={1} loading={true}>
      {/* Shows real-time AEO progress messages */}
    </ProgressTable>
  )}
</WizardStep1>
```

**Step 2: Plan Selection (Click 2)**
```tsx
<WizardStep2>
  <Text variant="headingLg">Choose Your AEO Plan</Text>
  <ProgressTable step={2} interactive={true}>
    <Button onClick={() => selectPlan('free')}>Select Free</Button>
    <Button onClick={() => selectPlan('starter')}>Select Starter</Button>
    <Button onClick={() => selectPlan('pro')}>Select Pro</Button>
  </ProgressTable>
</WizardStep2>
```

**Step 3: Blog Generation (Click 3)**
```tsx
<WizardStep3>
  <Text variant="headingLg">📝 Ready to Generate SEO Blogs?</Text>

  <Button
    variant="primary"
    size="large"
    onClick={handleStartBlogGeneration}
  >
    Start Blog Generation
  </Button>

  {isBlogGenerating && (
    <ProgressTable step={3} loading={true}>
      {selectedPlan === 'pro' ? (
        <Text>🔄 {blogProgress}/10 initialize blogs done...</Text>
      ) : (
        <Text>🔄 Creating your first SEO blog...</Text>
      )}
    </ProgressTable>
  )}
</WizardStep3>
```

#### 5. Spotlight Highlighting System
```tsx
// Highlight specific UI elements during wizard steps
<SpotlightHighlight
  target="improve-aeo-button"
  active={currentStep === 1}
  position="bottom"
>
  <Tooltip>Click here to start AEO optimization</Tooltip>
</SpotlightHighlight>
```

**CSS for Background Disabling:**
```css
.wizard-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  background: rgba(0, 0, 0, 0.7);
}

.wizard-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  max-width: 800px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
}

.spotlight-highlight {
  position: relative;
  z-index: 1001;
  box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.3);
  border-radius: 4px;
}

.disabled-background {
  pointer-events: none;
  opacity: 0.3;
}
```

#### 6. State Management
```typescript
interface WizardState {
  currentStep: 1 | 2 | 3 | 4;
  completed: boolean;
  selectedPlan: 'free' | 'starter' | 'pro';
  aeoCompleted: boolean;
  keywordsDiscovered: boolean;
  blogsGenerated: number;
}

// Store in shop metafield for persistence
const saveWizardState = async (state: WizardState) => {
  await admin.graphql(`
    mutation {
      metafieldsSet(metafields: [{
        namespace: "aeo_wizard"
        key: "state"
        type: "json"
        value: "${JSON.stringify(state)}"
        ownerId: "${shopGid}"
      }]) {
        metafields { id }
      }
    }
  `);
};
```

#### 7. Plan Upgrade Integration
```tsx
// When user clicks upgrade in wizard
const handlePlanUpgrade = async (plan: 'starter' | 'pro') => {
  // Use existing billing service
  const billingService = new BillingService(prisma, admin);
  const result = await billingService.createSubscription(shopDomain, plan);

  if (result.confirmationUrl) {
    // Open Shopify billing in new window, continue wizard after payment
    window.open(result.confirmationUrl, '_blank');

    // Poll for payment completion
    const pollPayment = setInterval(async () => {
      const subscription = await billingService.getSubscription(shopDomain);
      if (subscription.plan === plan) {
        clearInterval(pollPayment);
        setSelectedPlan(plan);
        // Update wizard table to show new features
        updateProgressTable();
      }
    }, 2000);
  }
};
```

## Missing Feature Implementation

### Pro Plan: 10 Initial Blog Generation
```typescript
// Add to app/services/billing.service.ts
pro: {
  name: 'Pro Plan',
  price: 9.99,
  blogLimit: 5,
  autoLlms: true,
  initialBlogs: 10, // New feature
  features: [
    '5 blogs per week',
    'Auto LLMs.txt generation every 2 weeks',
    'Premium SEO features',
    'Priority support',
    '10 initial blogs on signup' // Add this
  ]
}

// Add to blog generation logic
const generateInitialBlogs = async (shopDomain: string, plan: PlanType) => {
  if (plan === 'pro') {
    // Generate 10 blogs on Pro plan activation
    for (let i = 0; i < 10; i++) {
      await generateBlog(shopDomain, keywords[i % keywords.length]);
      // Show progress in wizard: "Generating blog ${i+1}/10..."
    }
  } else {
    // Generate 1 blog for Free/Starter
    await generateBlog(shopDomain, keywords[0]);
  }
};
```

## Plan Upgrade Handling (Simple Approach)

### When User Upgrades Plan Through Wizard

**Scenario**: User is on Free Plan and clicks "Select Starter" or "Select Pro"

**Simple Workflow**:
```
1. User clicks upgrade button → Show Shopify billing screen
2. After successful payment → Update plan in database
3. Immediately unlock new features:
   - Enhanced LLM Optimization (if Starter/Pro)
   - Better Gemini Search (if Starter/Pro)
   - Increased blog generation (2/week or 5/week)
4. Show success message: "✅ Plan upgraded! New features active."
5. Continue wizard from current step
```

**Technical Implementation**:
- Use Shopify's billing API for plan changes
- Update user plan in database after successful payment
- Refresh wizard table to show new ✅ checkmarks
- No need to restart wizard - just unlock features

**Key Points**:
- ✅ Simple one-click upgrade
- ✅ Immediate feature activation
- ✅ No wizard restart needed
- ✅ Clear visual feedback in table

## Implementation Steps

### 1. Detect First-Time User
```typescript
// Use shop metafield to track wizard completion
query GetWizardState {
  shop {
    metafield(namespace: "aeo_wizard", key: "completed") {
      value
    }
  }
}
```

### 2. Wizard Component Structure
```
/app/components/wizard/
├── WizardContainer.tsx
├── WelcomeStep.tsx
├── PlanComparisonStep.tsx
├── BlogSetupStep.tsx
└── CompletionStep.tsx
```

### 3. Wizard State Management
- Track current step (1-4)
- Store selected plan
- Monitor completion status
- Handle navigation between steps

### 4. Integration Points
- Connect to existing AEO improvement API (`/api/improve-aeo`)
- Use existing blog generation service
- Integrate with plan/billing system
- Update onboarding metafield on completion

## Key Features

### Progressive Enhancement
- **Step 1**: Everyone gets free value immediately
- **Step 2**: Clear comparison drives plan selection
- **Step 3**: Tailored experience based on choice
- **Step 4**: Clear completion and next steps

### User Experience
- ✅ Simple, linear flow
- ✅ Clear visual progress
- ✅ Immediate value (free features)
- ✅ Easy plan comparison
- ✅ Appropriate pacing for each plan

### Technical Considerations
- Use existing Shopify metafield pattern for tracking
- Integrate with current AEO and blog services
- Polaris components for consistent UI
- Error handling for API failures
- Progress indicators for long operations

## Integration with Existing App

### Router Integration
```typescript
// Modify app.tsx to include wizard detection
export const loader = async ({ request }: LoaderFunctionArgs) => {
  const { admin } = await authenticate.admin(request);
  const shopService = new ShopifyShopService(admin);
  const shopInfo = await shopService.getShopInfo();

  // Check if wizard was completed
  const wizardState = await getWizardState(shopInfo.primaryDomain);

  return {
    apiKey: process.env.SHOPIFY_API_KEY || "",
    showWizard: !wizardState?.completed
  };
};

// In app.tsx component
export default function App() {
  const { apiKey, showWizard } = useLoaderData<typeof loader>();

  return (
    <AppProvider isEmbeddedApp apiKey={apiKey}>
      <NavMenu>...</NavMenu>

      {showWizard && <WizardOverlay />}

      <Outlet />
    </AppProvider>
  );
}
```

### Wizard Navigation Integration
```typescript
// When wizard reaches Step 3 (Keyword Discovery)
const navigateToSEOBlogs = () => {
  // Highlight navigation link
  document.querySelector('[href="/app/seo-blogs"]')?.classList.add('wizard-highlight');

  // Programmatically navigate but keep wizard overlay
  navigate('/app/seo-blogs', { state: { wizardActive: true } });
};

// In SEO blogs page, detect wizard state
export default function SEOBlogsPage() {
  const location = useLocation();
  const wizardActive = location.state?.wizardActive;

  return (
    <Page>
      {wizardActive && <WizardStepOverlay step={3} />}
      {/* Rest of SEO blogs page */}
    </Page>
  );
}
```

### Real-Time Progress Updates
```typescript
// Use Server-Sent Events for real-time updates during long operations
const useWizardProgress = () => {
  const [progress, setProgress] = useState({
    aeoStatus: 'pending',
    keywordStatus: 'pending',
    blogStatus: 'pending',
    blogCount: 0
  });

  useEffect(() => {
    const eventSource = new EventSource('/api/wizard-progress');

    eventSource.onmessage = (event) => {
      const data = JSON.parse(event.data);
      setProgress(prev => ({ ...prev, ...data }));
    };

    return () => eventSource.close();
  }, []);

  return progress;
};
```

### Button Highlighting System
```typescript
// Spotlight component that highlights specific elements
interface SpotlightProps {
  targetSelector: string;
  active: boolean;
  children: React.ReactNode;
}

const SpotlightHighlight: React.FC<SpotlightProps> = ({
  targetSelector,
  active,
  children
}) => {
  useEffect(() => {
    if (active) {
      const element = document.querySelector(targetSelector);
      if (element) {
        element.classList.add('wizard-spotlight');
        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    return () => {
      document.querySelectorAll('.wizard-spotlight').forEach(el => {
        el.classList.remove('wizard-spotlight');
      });
    };
  }, [active, targetSelector]);

  if (!active) return null;

  return (
    <div className="wizard-instruction">
      {children}
    </div>
  );
};
```

### Error Handling & Recovery
```typescript
// Handle wizard errors gracefully
const WizardErrorBoundary: React.FC = ({ children }) => {
  const [hasError, setHasError] = useState(false);

  const retryWizard = () => {
    setHasError(false);
    // Reset wizard state to last known good step
    resetWizardToStep(getCurrentStep() - 1);
  };

  if (hasError) {
    return (
      <Card>
        <BlockStack gap="400">
          <Text variant="headingMd" tone="critical">
            Wizard Error
          </Text>
          <Text>Something went wrong. You can retry or skip this step.</Text>
          <InlineStack gap="300">
            <Button onClick={retryWizard}>Retry</Button>
            <Button variant="primary" onClick={skipWizard}>
              Skip & Go to Dashboard
            </Button>
          </InlineStack>
        </BlockStack>
      </Card>
    );
  }

  return <>{children}</>;
};
```

## Next Steps for Implementation

1. **Create wizard component structure** in `/app/components/wizard/`
2. **Implement metafield-based state tracking** using shop metafields
3. **Build progressive plan comparison table** with Polaris components
4. **Add Pro plan 10-blog generation feature** to billing service
5. **Integrate spotlight highlighting system** for guided interaction
6. **Connect to existing AEO and blog generation APIs**
7. **Test wizard flow end-to-end** with real Shopify stores
8. **Add wizard completion analytics** for optimization
